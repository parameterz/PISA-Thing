<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MR PISA Thing</title>
    <link rel="stylesheet" type="text/css" href="style.css" >
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

    <p>This tool was designed to help demonstrate the relationships between MR PISA measurement variables and 
        the calculated effective regurgitant orifice area (EROA) and regurgitant volume (RVol). 
    </p>
    <p>Adjust these values:</p>
    <div class="column-container">
        <div class="column">
            <label for="vtiSlider">MR VTI (cm):</label>
            <div id="vtiContainer" class="vertical-slider-container">
                <input type="range" id="vtiSlider" class="vertical-slider" min="0" max="300" step="1" value="150">
                <input type="number" id="vtiValue" value="150">
            </div>
            <p>This determines the RVol calculation.</p>
            <p>Shell area: <span class="shellArea"></span> cm<sup>2</sup></p>
            <p>Shell flow: <span class="shellFlow"></span> ml/sec</p>
            <p>EROA: <span class="eroa"></span> cm<sup>2</sup> (<span class="severity"></span>)</p>
            <h3>RVol: <span class="rvol"></span> ml (<span class="rvolSeverity"></span>)</h3>
        </div>  
        <div class="column">
            <label for="velocitySlider">MR peak velocity (cm/sec):</label>
            <div id="velocityContainer" class="vertical-slider-container">
                <input type="range" id="velocitySlider" class="vertical-slider" min="0" max="1000" step="1" value="500">
                <input type="number" id="velocityValue" value="500">
            </div>
            <p>This determines the EROA- which affects the RVol calculations.</p>
            <p>Shell area: <span class="shellArea"></span> cm<sup>2</sup></p>
            <p>Shell flow: <span class="shellFlow"></span> ml/sec</p>
            <h3>EROA: <span class="eroa"></span> cm<sup>2</sup> (<span class="severity"></span>)</h3>
            <h3>RVol: <span class="rvol"></span> ml (<span class="rvolSeverity"></span>)</h3>
        </div>
        <div class="column">
            <label for="scaleSlider">Aliasing velocity ("V<sub>a</sub>"; cm/sec):</label>
            <div id="scaleContainer" class="vertical-slider-container">
                <input type="range" id="scaleSlider" class="vertical-slider" min="0" max="1000" step="1" value="385">
                <input type="number" id="scaleValue" value="38.5">
            </div>
            <p>This determines the shell flow- which affects the EROA & RVol calculations.</p>
            <p>Shell area: <span class="shellArea"></span> cm<sup>2</sup></p>
            <h3>Shell flow: <span class="shellFlow"></span> ml/sec</h3>
            <h3>EROA: <span class="eroa"></span> cm<sup>2</sup> (<span class="severity"></span>)</h3>
            <h3>RVol: <span class="rvol"></span> ml (<span class="rvolSeverity"></span>)</h3>
        </div>  
        <div class="column">
            <label for="radiusSlider">Radius of the hemisphere (cm):</label>
            <div id="radiusContainer" class="vertical-slider-container">
                <input type="range" id="radiusSlider" class="vertical-slider" min="0" max="150" step="1" value="50">
                <input type="number" id="radiusValue" value="50">
            </div>
            <canvas id="hemisphereCanvas" width="200" height="200"></canvas>
            <p>This determines the shell area- which affects ...everything!</p>
            <h3>Shell area: <span class="shellArea"></span> cm<sup>2</sup></h3>
            <h3>Shell flow: <span class="shellFlow"></span> ml/sec</h3>
            <h3>EROA: <span class="eroa"></span> cm<sup>2</sup> (<span class="severity"></span>)</h3>
            <h3>RVol: <span class="rvol"></span> ml (<span class="rvolSeverity"></span>)</h3>
        </div>

    </div>
    <div>
        <hr/>
        <h4>Notes:</h4>
        <p>The shell area is calculated as 2 * pi * radius squared;</p>
        <p>The shell flow is calculated as shell area * v<sub>a</sub>;</p>
        <p>The EROA is calculated as shell flow &div; MR velocity;</p>
        <p>The regurgitant volume (RVol) is calculated as EROA * MR VTI;</p>
        <p>Also: the EROA and RVol still need context. For instance, is a regurgitant volume of 50 ml a little or a lot? 
            If the forward stroke volume is 50 ml, it is a lot, but what if the forward stroke volume is 100ml? Calculation of the regurgitant fraction (RF) adds that context, 
            but is beyond the scope of this simple demonstration.</p>
            

    </div>
    
    <script src="script.js"></script>
</body>
</html>
